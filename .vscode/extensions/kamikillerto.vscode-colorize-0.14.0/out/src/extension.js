"use strict";var tr=Object.create;var ae=Object.defineProperty;var rr=Object.getOwnPropertyDescriptor;var nr=Object.getOwnPropertyNames;var ir=Object.getPrototypeOf,or=Object.prototype.hasOwnProperty;var We=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ar=(r,e)=>{for(var t in e)ae(r,t,{get:e[t],enumerable:!0})},je=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nr(e))!or.call(r,i)&&i!==t&&ae(r,i,{get:()=>e[i],enumerable:!(n=rr(e,i))||n.enumerable});return r};var He=(r,e,t)=>(t=r!=null?tr(ir(r)):{},je(e||!r||!r.__esModule?ae(t,"default",{value:r,enumerable:!0}):t,r)),sr=r=>je(ae({},"__esModule",{value:!0}),r);var Tt=We((cs,Ft)=>{"use strict";Ft.exports=wt;function wt(r,e,t){r instanceof RegExp&&(r=At(r,t)),e instanceof RegExp&&(e=At(e,t));var n=Rt(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function At(r,e){var t=e.match(r);return t?t[0]:null}wt.range=Rt;function Rt(r,e,t){var n,i,o,a,s,l=t.indexOf(r),u=t.indexOf(e,l+1),g=l;if(l>=0&&u>0){for(n=[],o=t.length;g>=0&&!s;)g==l?(n.push(g),l=t.indexOf(r,g+1)):n.length==1?s=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=t.indexOf(e,g+1)),g=l<u&&l>=0?l:u;n.length&&(s=[o,a])}return s}});var Ot=We((us,Nt)=>{var St=Tt();Nt.exports=Nn;var Lt="\0SLASH"+Math.random()+"\0",It="\0OPEN"+Math.random()+"\0",ke="\0CLOSE"+Math.random()+"\0",Vt="\0COMMA"+Math.random()+"\0",_t="\0PERIOD"+Math.random()+"\0";function Me(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function _n(r){return r.split("\\\\").join(Lt).split("\\{").join(It).split("\\}").join(ke).split("\\,").join(Vt).split("\\.").join(_t)}function $n(r){return r.split(Lt).join("\\").split(It).join("{").split(ke).join("}").split(Vt).join(",").split(_t).join(".")}function $t(r){if(!r)return[""];var e=[],t=St("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,o=t.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var s=$t(o);return o.length&&(a[a.length-1]+=s.shift(),a.push.apply(a,s)),e.push.apply(e,a),e}function Nn(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),ne(_n(r),!0).map($n)):[]}function On(r){return"{"+r+"}"}function Pn(r){return/^-?0\d/.test(r)}function Bn(r,e){return r<=e}function Mn(r,e){return r>=e}function ne(r,e){var t=[],n=St("{","}",r);if(!n)return[r];var i=n.pre,o=n.post.length?ne(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var s=i+"{"+n.body+"}"+o[a];t.push(s)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),g=l||u,m=n.body.indexOf(",")>=0;if(!g&&!m)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+ke+n.post,ne(r)):[r];var p;if(g)p=n.body.split(/\.\./);else if(p=$t(n.body),p.length===1&&(p=ne(p[0],!1).map(On),p.length===1))return o.map(function(er){return n.pre+p[0]+er});var h;if(g){var b=Me(p[0]),d=Me(p[1]),T=Math.max(p[0].length,p[1].length),N=p.length==3?Math.abs(Me(p[2])):1,j=Bn,O=d<b;O&&(N*=-1,j=Mn);var B=p.some(Pn);h=[];for(var M=b;j(M,d);M+=N){var S;if(u)S=String.fromCharCode(M),S==="\\"&&(S="");else if(S=String(M),B){var Xe=T-S.length;if(Xe>0){var Ue=new Array(Xe+1).join("0");M<0?S="-"+Ue+S.slice(1):S=Ue+S}}h.push(S)}}else{h=[];for(var X=0;X<p.length;X++)h.push.apply(h,ne(p[X],!1))}for(var X=0;X<h.length;X++)for(var a=0;a<o.length;a++){var s=i+h[X]+o[a];(!e||g||s)&&t.push(s)}}return t}});var $i={};ar($i,{ColorizeContext:()=>me,activate:()=>Vi,canColorize:()=>Qt,cleanDecorationList:()=>Ti,colorize:()=>de,config:()=>w,deactivate:()=>_i,extension:()=>c,generateDecorations:()=>pe,q:()=>G,removeDuplicateDecorations:()=>ge,updateContextDecorations:()=>ue});module.exports=sr($i);var F=require("vscode");var H=class{strategies;enabledStrategies=[];constructor(){this.strategies=[]}enableStrategies(e){this.enabledStrategies=this.strategies.filter(t=>{if(e.find(n=>n===t.name)){let n=t.constructor;return new n}})}registerStrategy(e){this.has(e)||this.strategies.push(e)}has(e){return typeof e=="string"?this.strategies.some(t=>t.name===e):this.strategies.some(t=>t.name===e.name)}get(e){if(this.has(e)!==!1)return this.strategies.find(t=>t.name===e)}};var fe=class extends H{async extract(e){let t=await Promise.all(this.enabledStrategies.map(n=>n.extractColors(e)));return q(t)}extractOneColor(e){return this.enabledStrategies.map(n=>n.extractColor(e)).find(n=>n!==null)}},lr=new fe,E=lr;var A=class{constructor(e,t,n,i){this.name=e;this.REGEXP=t;this.REGEXP_ONE=n;this.colorFromRegexp=i}extractColors(e){return Promise.resolve(e.map(({line:t,text:n})=>{let i=null,o=[];for(;(i=this.REGEXP.exec(n))!==null;){let a=this.colorFromRegexp(i);a&&o.push(a)}return{line:t,colors:o}}))}extractColor(e){let t=this.REGEXP_ONE.exec(e);return t?this.colorFromRegexp(t):null}};var f="(?:$|`|\"|'|,| |;|\\)|\\r|\\n|}|\\]|<)",y="(?:\\.\\d+)",J=`(?:1(:?\\.0+)?|0${y}?|${y})`,R="[\\da-f]";var be=class{value;rgb;alpha;positionInText;constructor(e,t=0,n,i){this.value=e,this.positionInText=t,this.alpha=i??1,this.rgb=n}toRgbString(){return this.alpha===-1?this.value:`rgb(${this.rgb.join(", ")})`}toRgbaString(){return this.alpha===-1?this.value:`rgba(${this.rgb.join(", ")}, ${this.alpha})`}},x=be;var qe="(?:#|0x)",cr=new RegExp(`(${qe}(?:${R}{3,4}|${R}{6}|${R}{8}))${f}`,"gi"),ur=new RegExp(`^(${qe}(?:${R}{3,4}|${R}{6}|${R}{8}))${f}`,"i");function gr(r){let e=r.slice(0,6);if(r.length===3||r.length===4){let t=r.slice(0,3);e=[t[0],t[0],t[1],t[1],t[2],t[2]]}return[16*e[0]+e[1],16*e[2]+e[3],16*e[4]+e[5]]}function pr(r){if(r.length===4){let e=r[3];return(16*e+e)/255}if(r.length===8){let e=r.slice(6,8);return(16*e[0]+e[1])/255}return 1}function hr(r){return/(?:#|0x)(.+)/gi.exec(r)}function mr(r){return r.split("").map(e=>parseInt(e,16))}function dr(r){let e=r[1],t=hr(e)[1],n=mr(t),i=gr(n),o=pr(n);return new x(e,r.index,i,o)}var fr=new A("HEXA",cr,ur,dr);E.registerStrategy(fr);var Je="(?:#|0x)",br=new RegExp(`(${Je}(?:${R}{3,4}|${R}{6}|${R}{8}))${f}`,"gi"),Er=new RegExp(`^(${Je}(?:${R}{3,4}|${R}{6}|${R}{8}))${f}`,"i");function xr(r){let e=r.slice(-6);if(r.length===3||r.length===4){let t=r.slice(-3);e=[t[0],t[0],t[1],t[1],t[2],t[2]]}return[16*e[0]+e[1],16*e[2]+e[3],16*e[4]+e[5]]}function vr(r){if(r.length===4){let e=r[0];return(16*e+e)/255}if(r.length===8){let e=r.slice(0,2);return(16*e[0]+e[1])/255}return 1}function Cr(r){return/(?:#|0x)(.+)/gi.exec(r)}function Dr(r){return r.split("").map(e=>parseInt(e,16))}function yr(r){let e=r[1],t=Cr(e)[1],n=Dr(t),i=xr(n),o=vr(n);return new x(e,r.index,i,o)}var Ar=new A("ARGB",br,Er,yr);E.registerStrategy(Ar);var Y=`(?:\\d{1,3}${y}?|${y})`,Ee=Y,xe=Y,Ze=`rgba?\\(\\s*${Y}%?\\s*${Ee}%?\\s*${xe}%?(?:\\s*\\/\\s*(?:\\d{1,3}${y}?|${J})?%?)?\\)`,Qe=`rgb\\(\\s*${Y}\\s*,\\s*${Ee}\\s*,\\s*${xe}\\s*\\)`,Ye=`rgba\\(\\s*${Y}\\s*,\\s*${Ee}\\s*,\\s*${xe}\\s*,\\s*${J}\\s*\\)`,wr=new RegExp(`(${Qe}|${Ye}|${Ze})${f}`,"gi"),Rr=new RegExp(`^(${Qe}|${Ye}|${Ze})${f}`,"i");function Fr(r){let t=r.replace(/rgb(a){0,1}\(/,"").replace(/\)/,"").replace("/"," ").replaceAll(","," ").split(/\s+/),[n,i,o]=t.slice(0,3).map(l=>{let u=parseFloat(l);return l.includes("%")?255*(u>100?100:u)/100:u}),a=/%/.test(t[3]),s=parseFloat(t[3]??1);return!a&&s>1&&(s=1),a&&s>100&&(s=1),s>1&&(s=s/100),[n,i,o,s]}function Tr(r){let e=r[1],t=Fr(e),n=t[3]??1,i=t.slice(0,3);return i.every(o=>o<=255)?new x(r[1],r.index,i,n):null}var Sr=new A("RGB",wr,Rr,Tr);E.registerStrategy(Sr);var ve={aliceblue:{value:"#F0F8FF",rgb:[240,248,255],luminace:1},antiquewhite:{value:"#FAEBD7",rgb:[250,235,215],luminace:1},aqua:{value:"#00FFFF",rgb:[0,255,255],luminace:1},aquamarine:{value:"#7FFFD4",rgb:[127,255,212],luminace:1},azure:{value:"#F0FFFF",rgb:[240,255,255],luminace:1},beige:{value:"#F5F5DC",rgb:[245,245,220],luminace:1},bisque:{value:"#FFE4C4",rgb:[255,228,196],luminace:1},black:{value:"#000000",rgb:[0,0,0],luminace:1},blanchedalmond:{value:"#FFEBCD",rgb:[255,235,205],luminace:1},blue:{value:"#0000FF",rgb:[0,0,255],luminace:1},blueviolet:{value:"#8A2BE2",rgb:[138,43,226],luminace:1},brown:{value:"#A52A2A",rgb:[165,42,42],luminace:1},burlywood:{value:"#DEB887",rgb:[222,184,135],luminace:1},cadetblue:{value:"#5F9EA0",rgb:[95,158,160],luminace:1},chartreuse:{value:"#7FFF00",rgb:[127,255,0],luminace:1},chocolate:{value:"#D2691E",rgb:[210,105,30],luminace:1},coral:{value:"#FF7F50",rgb:[255,127,80],luminace:1},cornflowerblue:{value:"#6495ED",rgb:[100,149,237],luminace:1},cornsilk:{value:"#FFF8DC",rgb:[255,248,220],luminace:1},crimson:{value:"#DC143C",rgb:[220,20,60],luminace:1},cyan:{value:"#00FFFF",rgb:[0,255,255],luminace:1},darkblue:{value:"#00008B",rgb:[0,0,139],luminace:1},darkcyan:{value:"#008B8B",rgb:[0,139,139],luminace:1},darkgoldenrod:{value:"#B8860B",rgb:[184,134,11],luminace:1},darkgray:{value:"#A9A9A9",rgb:[169,169,169],luminace:1},darkgrey:{value:"#A9A9A9",rgb:[169,169,169],luminace:1},darkgreen:{value:"#006400",rgb:[0,100,0],luminace:1},darkkhaki:{value:"#BDB76B",rgb:[189,183,107],luminace:1},darkmagenta:{value:"#8B008B",rgb:[139,0,139],luminace:1},darkolivegreen:{value:"#556B2F",rgb:[85,107,47],luminace:1},darkorange:{value:"#FF8C00",rgb:[255,140,0],luminace:1},darkorchid:{value:"#9932CC",rgb:[153,50,204],luminace:1},darkred:{value:"#8B0000",rgb:[139,0,0],luminace:1},darksalmon:{value:"#E9967A",rgb:[233,150,122],luminace:1},darkseagreen:{value:"#8FBC8F",rgb:[143,188,143],luminace:1},darkslateblue:{value:"#483D8B",rgb:[72,61,139],luminace:1},darkslategray:{value:"#2F4F4F",rgb:[47,79,79],luminace:1},darkslategrey:{value:"#2F4F4F",rgb:[47,79,79],luminace:1},darkturquoise:{value:"#00CED1",rgb:[0,206,209],luminace:1},darkviolet:{value:"#9400D3",rgb:[148,0,211],luminace:1},deeppink:{value:"#FF1493",rgb:[255,20,147],luminace:1},deepskyblue:{value:"#00BFFF",rgb:[0,191,255],luminace:1},dimgray:{value:"#696969",rgb:[105,105,105],luminace:1},dimgrey:{value:"#696969",rgb:[105,105,105],luminace:1},dodgerblue:{value:"#1E90FF",rgb:[30,144,255],luminace:1},firebrick:{value:"#B22222",rgb:[178,34,34],luminace:1},floralwhite:{value:"#FFFAF0",rgb:[255,250,240],luminace:1},forestgreen:{value:"#228B22",rgb:[34,139,34],luminace:1},fuchsia:{value:"#FF00FF",rgb:[255,0,255],luminace:1},gainsboro:{value:"#DCDCDC",rgb:[220,220,220],luminace:1},ghostwhite:{value:"#F8F8FF",rgb:[248,248,255],luminace:1},gold:{value:"#FFD700",rgb:[255,215,0],luminace:1},goldenrod:{value:"#DAA520",rgb:[218,165,32],luminace:1},gray:{value:"#808080",rgb:[128,128,128],luminace:1},grey:{value:"#808080",rgb:[128,128,128],luminace:1},green:{value:"#008000",rgb:[0,128,0],luminace:1},greenyellow:{value:"#ADFF2F",rgb:[173,255,47],luminace:1},honeydew:{value:"#F0FFF0",rgb:[240,255,240],luminace:1},hotpink:{value:"#FF69B4",rgb:[255,105,180],luminace:1},indianred:{value:"#CD5C5C",rgb:[205,92,92],luminace:1},indigo:{value:"#4B0082",rgb:[75,0,130],luminace:1},ivory:{value:"#FFFFF0",rgb:[255,255,240],luminace:1},khaki:{value:"#F0E68C",rgb:[240,230,140],luminace:1},lavender:{value:"#E6E6FA",rgb:[230,230,250],luminace:1},lavenderblush:{value:"#FFF0F5",rgb:[255,240,245],luminace:1},lawngreen:{value:"#7CFC00",rgb:[124,252,0],luminace:1},lemonchiffon:{value:"#FFFACD",rgb:[255,250,205],luminace:1},lightblue:{value:"#ADD8E6",rgb:[173,216,230],luminace:1},lightcoral:{value:"#F08080",rgb:[240,128,128],luminace:1},lightcyan:{value:"#E0FFFF",rgb:[224,255,255],luminace:1},lightgoldenrodyellow:{value:"#FAFAD2",rgb:[250,250,210],luminace:1},lightgray:{value:"#D3D3D3",rgb:[211,211,211],luminace:1},lightgrey:{value:"#D3D3D3",rgb:[211,211,211],luminace:1},lightgreen:{value:"#90EE90",rgb:[144,238,144],luminace:1},lightpink:{value:"#FFB6C1",rgb:[255,182,193],luminace:1},lightsalmon:{value:"#FFA07A",rgb:[255,160,122],luminace:1},lightseagreen:{value:"#20B2AA",rgb:[32,178,170],luminace:1},lightskyblue:{value:"#87CEFA",rgb:[135,206,250],luminace:1},lightslategray:{value:"#778899",rgb:[119,136,153],luminace:1},lightslategrey:{value:"#778899",rgb:[119,136,153],luminace:1},lightsteelblue:{value:"#B0C4DE",rgb:[176,196,222],luminace:1},lightyellow:{value:"#FFFFE0",rgb:[255,255,224],luminace:1},lime:{value:"#00FF00",rgb:[0,255,0],luminace:1},limegreen:{value:"#32CD32",rgb:[50,205,50],luminace:1},linen:{value:"#FAF0E6",rgb:[250,240,230],luminace:1},magenta:{value:"#FF00FF",rgb:[255,0,255],luminace:1},maroon:{value:"#800000",rgb:[128,0,0],luminace:1},mediumaquamarine:{value:"#66CDAA",rgb:[102,205,170],luminace:1},mediumblue:{value:"#0000CD",rgb:[0,0,205],luminace:1},mediumorchid:{value:"#BA55D3",rgb:[186,85,211],luminace:1},mediumpurple:{value:"#9370DB",rgb:[147,112,219],luminace:1},mediumseagreen:{value:"#3CB371",rgb:[60,179,113],luminace:1},mediumslateblue:{value:"#7B68EE",rgb:[123,104,238],luminace:1},mediumspringgreen:{value:"#00FA9A",rgb:[0,250,154],luminace:1},mediumturquoise:{value:"#48D1CC",rgb:[72,209,204],luminace:1},mediumvioletred:{value:"#C71585",rgb:[199,21,133],luminace:1},midnightblue:{value:"#191970",rgb:[25,25,112],luminace:1},mintcream:{value:"#F5FFFA",rgb:[245,255,250],luminace:1},mistyrose:{value:"#FFE4E1",rgb:[255,228,225],luminace:1},moccasin:{value:"#FFE4B5",rgb:[255,228,181],luminace:1},navajowhite:{value:"#FFDEAD",rgb:[255,222,173],luminace:1},navy:{value:"#000080",rgb:[0,0,128],luminace:1},oldlace:{value:"#FDF5E6",rgb:[253,245,230],luminace:1},olive:{value:"#808000",rgb:[128,128,0],luminace:1},olivedrab:{value:"#6B8E23",rgb:[107,142,35],luminace:1},orange:{value:"#FFA500",rgb:[255,165,0],luminace:1},orangered:{value:"#FF4500",rgb:[255,69,0],luminace:1},orchid:{value:"#DA70D6",rgb:[218,112,214],luminace:1},palegoldenrod:{value:"#EEE8AA",rgb:[238,232,170],luminace:1},palegreen:{value:"#98FB98",rgb:[152,251,152],luminace:1},paleturquoise:{value:"#AFEEEE",rgb:[175,238,238],luminace:1},palevioletred:{value:"#DB7093",rgb:[219,112,147],luminace:1},papayawhip:{value:"#FFEFD5",rgb:[255,239,213],luminace:1},peachpuff:{value:"#FFDAB9",rgb:[255,218,185],luminace:1},peru:{value:"#CD853F",rgb:[205,133,63],luminace:1},pink:{value:"#FFC0CB",rgb:[255,192,203],luminace:1},plum:{value:"#DDA0DD",rgb:[221,160,221],luminace:1},powderblue:{value:"#B0E0E6",rgb:[176,224,230],luminace:1},purple:{value:"#800080",rgb:[128,0,128],luminace:1},rebeccapurple:{value:"#663399",rgb:[102,51,153],luminace:1},red:{value:"#FF0000",rgb:[255,0,0],luminace:1},rosybrown:{value:"#BC8F8F",rgb:[188,143,143],luminace:1},royalblue:{value:"#4169E1",rgb:[65,105,225],luminace:1},saddlebrown:{value:"#8B4513",rgb:[139,69,19],luminace:1},salmon:{value:"#FA8072",rgb:[250,128,114],luminace:1},sandybrown:{value:"#F4A460",rgb:[244,164,96],luminace:1},seagreen:{value:"#2E8B57",rgb:[46,139,87],luminace:1},seashell:{value:"#FFF5EE",rgb:[255,245,238],luminace:1},sienna:{value:"#A0522D",rgb:[160,82,45],luminace:1},silver:{value:"#C0C0C0",rgb:[192,192,192],luminace:1},skyblue:{value:"#87CEEB",rgb:[135,206,235],luminace:1},slateblue:{value:"#6A5ACD",rgb:[106,90,205],luminace:1},slategray:{value:"#708090",rgb:[112,128,144],luminace:1},slategrey:{value:"#708090",rgb:[112,128,144],luminace:1},snow:{value:"#FFFAFA",rgb:[255,250,250],luminace:1},springgreen:{value:"#00FF7F",rgb:[0,255,127],luminace:1},steelblue:{value:"#4682B4",rgb:[70,130,180],luminace:1},tan:{value:"#D2B48C",rgb:[210,180,140],luminace:1},teal:{value:"#008080",rgb:[0,128,128],luminace:1},thistle:{value:"#D8BFD8",rgb:[216,191,216],luminace:1},tomato:{value:"#FF6347",rgb:[255,99,71],luminace:1},turquoise:{value:"#40E0D0",rgb:[64,224,208],luminace:1},violet:{value:"#EE82EE",rgb:[238,130,238],luminace:1},wheat:{value:"#F5DEB3",rgb:[245,222,179],luminace:1},white:{value:"#FFFFFF",rgb:[255,255,255],luminace:1},whitesmoke:{value:"#F5F5F5",rgb:[245,245,245],luminace:1},yellow:{value:"#FFFF00",rgb:[255,255,0],luminace:1},yellowgreen:{value:"#9ACD32",rgb:[154,205,50],luminace:1}},Ke=Object.keys(ve).map(r=>`(?:${r.toLowerCase()})`).join("|"),Lr=RegExp(`(?:,| |'|"|\\(|:)(${Ke})${f}`,"i"),Ir=RegExp(`^(?:^|,|\\s|\\(|:)(${Ke})${f}`,"i"),Ce=class{name="BROWSERS_COLORS";extractColors(e){return Promise.resolve(e.map(({line:t,text:n})=>{let i=null,o=[],a=0;for(;(i=n.match(Lr))!==null;){a+=(i.index??0)+1;let s=i[1];o.push(new x(i[1],a,ve[s.toLowerCase()].rgb)),n=n.slice((i.index??0)+1+i[1].length),a+=i[1].length}return{line:t,colors:o}}))}extractColor(e){let t=e.match(Ir);if(t){let n=t[1];return new x(t[1],t.index,ve[n.toLowerCase()].rgb)}return null}};E.registerStrategy(new Ce);var De=`\\d*${y}?`,K=`(?:\\d{1,3}${y}?|${y})`,ye=K,Vr=`([ ,]\\s*${J}\\s*|\\s*\\/\\s*${K}%?\\s*)?`,et=`hsla?\\(\\s*${De}(deg|turn)?\\s*\\s*${K}%?\\s*\\s*${ye}%?\\s*${Vr}\\)`,tt=`hsl\\(\\s*${De}\\s*,\\s*${K}%\\s*,\\s*${ye}%\\s*\\)`,rt=`hsla\\(\\s*${De}\\s*,\\s*${K}%\\s*,\\s*${ye}%\\s*,\\s*${J}\\s*\\)`,_r=new RegExp(`(${tt}|${rt}|${et})${f}`,"gi"),$r=new RegExp(`^(${tt}|${rt}|${et})${f}`,"i");function Nr(r){let e=r.replace(/hsl(a){0,1}\(/,"").replace(/\)/,"").replace("/"," ").replaceAll(","," ").split(/\s+/),t=parseFloat(e[0]);/turn/.test(e[0])&&(t=t%1*360);let[n,i]=e.slice(1,3).map(parseFloat),o=/%/.test(e[3]),a=parseFloat(e[3]??1);return!o&&a>1&&(a=1),o&&a>100&&(a=1),a>1&&(a=a/100),[t,n,i,a]}function Or(r){let e=r[0],[t,n,i,o]=Nr(e);if(n<=100&&i<=100){let[a,s,l]=nt(t,n,i,o);return new x(r[1],r.index,[a,s,l],o)}return null}var Pr=new A("HSL",_r,$r,Or);E.registerStrategy(Pr);var se=`(?:\\d{1,3}${y}?|${y})`,Br=se,Mr=se,kr=`(\\s*\\/\\s*${se}%?\\s*)?`,it=`oklab?\\(\\s*${se}%?\\s*\\s*-?${Br}%?\\s*\\s*-?${Mr}%?\\s*${kr}\\)`,zr=new RegExp(`(${it})${f}`,"gi"),Gr=new RegExp(`^(${it})${f}`,"i");function Xr(r){return new x(r[1],r.index,[-1,-1,-1],-1)}var Ur=new A("OKLAB",zr,Gr,Xr);E.registerStrategy(Ur);var le=`(?:\\d{1,3}${y}?|${y})`,Wr=le,jr=le,Hr=`(\\s*\\/\\s*${le}%?\\s*)?`,ot=`oklch?\\(\\s*${le}%?\\s*\\s*-?${Wr}%?\\s*\\s*-?${jr}(deg)?\\s*${Hr}\\)`,qr=new RegExp(`(${ot})${f}`,"gi"),Jr=new RegExp(`^(${ot})${f}`,"i");function Zr(r){return new x(r[1],r.index,[-1,-1,-1],-1)}var Qr=new A("OKLCH",qr,Jr,Zr);E.registerStrategy(Qr);var ee=require("vscode"),Ae=class{color;disposed=!1;hidden=!1;decorationFn;get decoration(){return this._generateDecorator(),this._decoration}set decoration(e){this._decoration=e}get rgb(){return this.color.rgb}constructor(e,t,n){this.color=e,this.decorationFn=n,this.generateRange(t)}dispose(){try{this._decoration.dispose(),this.disposed=!0}catch(e){console.log(e)}}hide(){this._decoration&&this._decoration.dispose(),this.hidden=!0}generateRange(e){let t=new ee.Range(new ee.Position(e,this.color.positionInText),new ee.Position(e,this.color.positionInText+this.color.value.length));return this.currentRange=t,t}shouldGenerateDecoration(){return this.disposed===!0?!1:this._decoration===null||this._decoration===void 0||this.hidden}_generateDecorator(){this._decoration=this.decorationFn(this.color)}},at=Ae;var q=r=>r.flat(2).filter(e=>e.colors.length!==0),st="#FFFFFF",lt="#000000",Re=class{static textToFileLines(e){return e.split(/\n/).map((t,n)=>({text:t,line:n}))}static findColors(e){return E.extract(e)}static setupColorsExtractors(e){E.enableStrategies(e)}static generateDecoration(e,t,n){return new at(e,t,n)}};function Yr(r){let e=r.rgb.map(t=>(t=t/255,t<.03928?t=t/12.92:(t=(t+.055)/1.055,t=Math.pow(t,2.4)),t));return .2126*e[0]+.7152*e[1]+.0722*e[2]}function ct(r){let e=Yr(r),t=(e+.05)/.05;if(t>7)return lt;let n=1.05/(e+.05);return n>7?st:t>n?lt:st}function nt(r,e,t,n=1){let i,o,a;if(e===0)return i=o=a=Math.round(t/100*255),[i,o,a,n];t=t/100,e=e/100;let s=t<.5?t*(1+e):t+e-t*e,l=2*t-s;r=r%360/360;let u=(r+.333)%1,g=r,m=r-.333;return m<0&&(m=m+1),i=we(s,l,u),o=we(s,l,g),a=we(s,l,m),[Math.round(i*255),Math.round(o*255),Math.round(a*255),n]}function we(r,e,t){let n=e;return 6*t<1?e+(r-e)*6*t:2*t<1?r:3*t<2?e+(r-e)*(2/3-t)*6:n}var L=Re;var Fe=class{_running=!1;_queue=[];push(e){return this._queue.push(e),this._running||this._next(),this}_next(){this._running=!1;let e=this._queue.shift();if(e){this._running=!0;try{e(this._next.bind(this))}catch{this._next.call(this)}}}},ut=Fe;var k=require("vscode");var Te=class{disposed=!1;hidden=!1;decorationFn;get decoration(){return this._generateDecorator(),this._decoration}set decoration(e){this._decoration=e}get rgb(){return this.variable.color.rgb}constructor(e,t,n){this.variable=e,this.decorationFn=n,this.variable.color?this.generateRange(t):this.currentRange=new k.Range(new k.Position(t,0),new k.Position(t,0))}dispose(){try{this._decoration.dispose()}catch{}this.disposed=!0}hide(){this._decoration&&this._decoration.dispose(),this.hidden=!0}generateRange(e){let t=new k.Range(new k.Position(e,this.variable.color.positionInText),new k.Position(e,this.variable.color.positionInText+this.variable.value.length));return this.currentRange=t,t}shouldGenerateDecoration(){let e=v.findVariable(this.variable);return this.disposed===!0||e===null?!1:this._decoration===null||this._decoration===void 0||this.hidden}_generateDecorator(){let e=v.findVariable(this.variable);e&&this.variable.color!==e&&(this.variable.color=e),this.variable.color&&this.variable.color.rgb&&(this._decoration=this.decorationFn(this.variable.color))}},gt=Te;var Se=class extends H{async extractVariables(e,t){let n=await Promise.all(this.enabledStrategies.map(i=>i.extractVariables(e,t)));return q(n)}deleteVariableInLine(e,t){this.enabledStrategies.forEach(n=>n.deleteVariable(e,t))}async extractDeclarations(e,t){return Promise.all(this.enabledStrategies.map(n=>n.extractDeclarations(e,t)))}getVariablesCount(){return this.enabledStrategies.reduce((e,t)=>e+t.variablesCount(),0)}findVariable(e){return this.get(e.type).getVariableValue(e)}removeVariablesDeclarations(e){this.enabledStrategies.forEach(t=>t.deleteVariable(e))}},Kr=new Se,D=Kr;var Le=class{name;value;color;location;type;constructor(e,t,n,i,o){this.name=e,this.value=t,this.color=n,this.location=i,this.type=o}toRgbString(){return this.color.toRgbString()}update(e){this.color=e}},Ie=Le;var pt=require("path"),Ve=class{entries=new Map;has(e,t,n){let i=this.get(e,t,n);return i&&i.length>0}get(e,t,n){let i=this.entries.get(e)||[];return t!==void 0&&(i=i.filter(o=>o.location.fileName===t)),n!==void 0&&(i=i.filter(o=>o.location.line===n)),i}__delete(e,t,n){let i=this.get(e);n!==null?i=i.filter(o=>o.location.fileName!==t||o.location.fileName===t&&o.location.line!==n):t!==null&&(i=i.filter(o=>o.location.fileName!==t)),this.entries.set(e,i)}deleteVariablesFile(e,t){let n=this.entries.entries(),i=n.next();for(;i.done===!1;){let o=i.value[0];this.__delete(o,e,t),i=n.next()}}delete(e,t,n){this.__delete(e,t,n)}addEntry(e,t){let n=Array.isArray(t)?t:[t];if(this.entries.has(e)){let i=this.entries.get(e);this.entries.set(e,i?i.concat(n):n)}else this.entries.set(e,n)}get count(){return this.entries.size}findDeclaration(e,t,n){return this.findClosestDeclaration(e,t,n)}findClosestDeclaration(e,t,n){let i=this.get(e,t);i.length===0&&(i=this.get(e)),i.length===0&&this.delete(e),i=this.filterDecorations(i,t),n?i=i.filter(s=>s.location.line===n):i=i.sort((s,l)=>s.location.line-l.location.line);let o=i[i.length-1],a=i.pop();for(;a&&a.color===void 0;)a=i.pop();return a||o}filterDecorations(e,t){let n=(0,pt.dirname)(t),i=new RegExp(`^${encodeURI(n)}`),o=e.filter(a=>i.test(encodeURI(a.location.fileName)));return o.length!==0||n===t?o:this.filterDecorations(e,n)}},ht=Ve;var _=class{constructor(e,t,n,i,o){this.name=e;this.DECLARATION_REGEXP=t;this.USES_REGEXP=n;this.USE_REGEXP=i;this.regexpExtractor=o}store=new ht;async extractDeclarations(e,t){return Promise.resolve(t.map(({text:n,line:i})=>this.__extractDeclarations(e,n,i)).length)}__extractDeclarations(e,t,n){let i=null;for(;(i=this.DECLARATION_REGEXP.exec(t))!==null;){let o=this.regexpExtractor.getVariableNameFromDeclaration(i),a=E.extractOneColor(t.slice(i.index+i[0].length).trim())||this.extractVariable(e,t.slice(i.index+i[0].length).trim());if(this.store.has(o,e,n))this.store.findDeclaration(o,e,n).update(a);else{let s=new Ie(o,o,a,{fileName:e,line:n,position:i.index},this.name);this.store.addEntry(o,s)}}}extractVariables(e,t){let n=t.map(({line:i,text:o})=>{let a=null,s=[];for(;(a=this.USES_REGEXP.exec(o))!==null;){let[l,u,g]=this.regexpExtractor.getVariableNameFromUses(a),m=(g||"").length,p={fileName:e,line:i,position:m+a.index},h=new Ie(l,u||l,new x(u||l,m+a.index,null,null),p,this.name);s.push(h)}return{line:i,colors:s}});return q(n)}extractVariable(e,t){let n=t.match(this.USE_REGEXP),i;if(n){let o=this.regexpExtractor.getVariableNameFromUse(n);return i=this.store.findClosestDeclaration(o,e),i?i.color:void 0}}getVariableValue(e){let t=null;if(this.store.has(e.name)===!0){let n=this.store.findClosestDeclaration(e.name,e.location.fileName);n.color===void 0&&(n=this.store.findClosestDeclaration(e.name,".")),n.color&&(t=new x(n.color.alpha===-1?n.color.value:e.color.value,e.location.position,n.color.rgb,n.color.alpha))}return t}variablesCount(){return this.store.count}deleteVariable(e,t){this.store.deleteVariablesFile(e,t)}};var en=new RegExp(`(var\\((--(?:[a-z]+[\\-_a-z\\d]*))\\))(?!:)${f}`,"gi"),tn=new RegExp(`^(var\\((--(?:[a-z]+[\\-_a-z\\d]*))\\))(?!:)${f}`,"i"),rn=new RegExp(`(?:(--(?:[a-z]+[\\-_a-z\\d]*)\\s*):)${f}`,"gi"),nn={getVariableNameFromDeclaration(r){return(r[1]||r[2]).trim()},getVariableNameFromUses(r){return[r[2].trim(),r[1].trim()]},getVariableNameFromUse(r){return r[2].trim()}},on=new _("CSS",rn,en,tn,nn);D.registerStrategy(on);var an=new RegExp(`(@(?:[a-z]+[\\-_a-z\\d]*)(?!:))${f}`,"gi"),sn=new RegExp(`^(@(?:[a-z]+[\\-_a-z\\d]*)(?!:))${f}`,"i"),ln=new RegExp(`(?:(@(?:[a-z]+[\\-_a-z\\d]*)\\s*):)${f}`,"gi"),cn={getVariableNameFromDeclaration(r){return(r[1]||r[2]).trim()},getVariableNameFromUses(r){return[r[1].trim()]},getVariableNameFromUse(r){return r[1].trim()}};D.registerStrategy(new _("LESS",ln,an,sn,cn));var un=new RegExp(`(\\$(?:[_a-z]+[\\-_a-z\\d]*)(?!:))${f}`,"gi"),gn=new RegExp(`^(\\$(?:[_a-z]+[\\-_a-z\\d]*)(?!:))${f}`,"i"),pn=new RegExp(`(?:(\\$(?:[_a-z]+[\\-_a-z\\d]*)\\s*):)${f}`,"gi"),hn={getVariableNameFromDeclaration(r){return(r[1]||r[2]).trim()},getVariableNameFromUses(r){return[r[1].trim()]},getVariableNameFromUse(r){return r[1].trim()}};D.registerStrategy(new _("SASS",pn,un,gn,hn));var mn=new RegExp(`(^|(?::|=)\\s*)((?:[\\-]*[$a-z_][\\-_\\d]*)+)(?!=)${f}`,"gi"),dn=new RegExp(`(^|(?::|=)\\s*)((?:[\\-]*[$a-z_][\\-_\\d]*)+)(?!=)${f}`,"i"),fn=new RegExp(`(?:(^(?:\\$|(?:[\\-_$]+[a-z\\d]+)|(?:[^\\d||\\-|@]+))(?:[_a-z\\d][\\-]*)*))\\s*=${f}`,"gi"),bn={getVariableNameFromDeclaration(r){return(r[1]||r[2]).trim()},getVariableNameFromUses(r){return[r[2].trim(),null,r[1]]},getVariableNameFromUse(r){return r[2].trim()}};D.registerStrategy(new _("STYLUS",fn,mn,dn,bn));var mt=He(require("fs")),P=require("vscode"),_e=class{statusBar;constructor(){this.statusBar=P.window.createStatusBarItem(P.StatusBarAlignment.Right)}async getWorkspaceVariables(e=[],t=[]){this.statusBar.show(),this.statusBar.text="Colorize: $(loading~spin) Searching for color variables...";try{let n=`{${e.join(",")}}`,i=`{${t.join(",")}}`,o=await P.workspace.findFiles(n,i);await Promise.all(this.extractFilesVariable(o));let a=D.getVariablesCount();this.statusBar.text=`Colorize: ${a} variables`}catch{this.statusBar.backgroundColor=new P.ThemeColor("statusBarItem.errorBackground"),this.statusBar.color=new P.ThemeColor("statusBarItem.errorForeground"),this.statusBar.text="Colorize: $(circle-slash) Variables extraction fail"}}textToDocumentLine(e){return e.split(/\n/).map((t,n)=>({text:t,line:n}))}extractFilesVariable(e){return e.map(async t=>{let n=mt.readFileSync(t.fsPath,"utf8"),i=this.textToDocumentLine(n);return D.extractDeclarations(t.fsPath,i)})}findVariablesDeclarations(e,t){return D.extractDeclarations(e,t)}findVariables(e,t){return D.extractVariables(e,t)}findVariable(e){return D.findVariable(e)}generateDecoration(e,t,n){return new gt(e,t,n)}setupVariablesExtractors(e){D.enableStrategies(e)}deleteVariableInLine(e,t){D.deleteVariableInLine(e,t)}removeVariablesDeclarations(e){D.removeVariablesDeclarations(e)}},En=new _e,v=En;var $e=class{_dirtyCache;_decorationsCache;constructor(){this._dirtyCache=new Map,this._decorationsCache=new Map}getCachedDecorations(e){if(!e.isDirty&&this._decorationsCache.has(e.fileName))return this._decorationsCache.get(e.fileName);if(this._dirtyCache.has(e.fileName))return this._dirtyCache.get(e.fileName)}saveDecorations(e,t){e.isDirty?this._saveDirtyDecoration(e.fileName,t):this._saveSavedDecorations(e.fileName,t)}_saveDirtyDecoration(e,t){return this._dirtyCache.set(e,t)}_saveSavedDecorations(e,t){return this._decorationsCache.set(e,t)}clearCache(){this._dirtyCache.clear(),this._decorationsCache.clear()}},xn=new $e,U=xn;var Ne=class{static decorate(e,t,n){let i=t.entries(),o=i.next();for(;!o.done;){let a=o.value[0],s=o.value[1];n.indexOf(a)===-1&&this.decorateOneLine(e,s,a),o=i.next()}}static decorateOneLine(e,t,n){t.forEach(i=>{i.shouldGenerateDecoration()===!0&&e.setDecorations(i.decoration,[i.generateRange(n)])})}},W=Ne;function dt(r,e){let t=r;return e&&(t=r.map(e)),r.filter((n,i)=>t.indexOf(t[i])===i)}function ft(r,e){return r===null||e===null||r.length!==e.length?!1:(r.forEach((t,n)=>{if(r[n]!==e[n])return!1}),!0)}var $=require("vscode");var vn="data:image/png;base64,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";function Oe(){let r=$.workspace.getConfiguration("colorize",$.window.activeTextEditor?.document),e=Array.from(new Set(r.get("colorized_variables",[]))),t=Array.from(new Set(r.get("colorized_colors",[]))),n=r.get("languages",[]),i=Cn(n).map(l=>`**/*${l}`),o=Array.from(new Set(r.get("include",[]))),a=Array.from(new Set(r.get("exclude",[]))),s=r.get("enable_search_variables",!1);return{languages:n,isHideCurrentLineDecorations:r.get("hide_current_line_decorations")??!0,colorizedColors:t,colorizedVariables:e,filesToIncludes:o,filesToExcludes:a,inferedFilesToInclude:i,searchVariables:s,decorationFn:Pe(r.get("decoration_type"))}}function Pe(r="background"){switch(r){case"underline":return function(e){return $.window.createTextEditorDecorationType({borderWidth:"0 0 2px 0",borderStyle:"solid",borderColor:e.toRgbString(),rangeBehavior:$.DecorationRangeBehavior.ClosedClosed})};case"background":default:return function(e){let t=e.toRgbaString();return $.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",borderColor:t,backgroundColor:`transparent;
            background-image:
              linear-gradient(${t}, ${t}),
              linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 100%),
              url(${vn});
            background-size: 10px 10px;
            background-position: 0 0, 5px 5px;
          `,color:ct(e),rangeBehavior:$.DecorationRangeBehavior.ClosedClosed})}}}function Cn(r){let e=$.extensions.all.reduce((t,n)=>(n.packageJSON?.contributes?.languages&&n.packageJSON.contributes.languages.forEach(i=>{r.indexOf(i.id)!==-1&&i.extensions&&(t=[...t,...i.extensions])}),t),[]);return dt(e.flat())}var re=require("vscode");var te=require("vscode");function bt(r){let e=[],t=0,n=0;return r.reverse(),r.forEach(i=>{t=i.range.start.line+n,i.text.split(/\n/).map((o,a,s)=>{a===0&&o===""&&s.length===1?t++:e.push(Dn(t++,o)),n++}),n--}),e}function Dn(r,e){return{rangeLength:0,rangeOffset:0,text:e,range:new te.Range(new te.Position(r,0),new te.Position(r,e.length))}}var Be=class{_currentTask=null;run(e){return this._currentTask&&this._currentTask.return?.(),this._currentTask=e(),this._run(),this}stop(){this._currentTask&&this._currentTask.return?.()}_run(){let e=this._currentTask;function t(n){try{let i=e.next(n);return i.done?i.value:Promise.resolve(i.value).then(t)}catch{}}t()}},Et=Be;var xt=new Et,ce=r=>r.dispose();function yn(r,e,t){return r.updated===null||r.updated===0&&c.editor?.document.lineCount===1&&c.editor?.document.lineAt(0).text===""?(e.get(r.old)?.forEach(ce),!1):(Math.abs(r.old-r.updated)>Math.abs(t)&&(r.updated=r.old+t),!0)}function An(r,e){r.map(({range:t})=>{let n=t.start.line;e.deco.has(n)&&e.deco.get(n)?.forEach(ce)})}function wn(r,e){let t=r.end.line-r.start.line;return e.forEach(n=>{if(n.updated!==null){if(n.old>r.start.line&&n.old<=r.end.line){n.updated=null;return}n.old>=r.end.line&&(n.updated=n.updated-t),n.updated<0&&(n.updated=0)}}),e}function Rn(r,e){return r.reverse(),r.forEach(t=>{for(let n=t.range.start.line;n<=t.range.end.line;n++)v.deleteVariableInLine(c.editor?.document.fileName,n);e=wn(t.range,e)}),r}function Fn(r,e){return r=bt(r),r.forEach(t=>{e.forEach(n=>{n.updated>=t.range.start.line&&(n.updated=n.updated+1)})}),r}function Tn(r,e,t){let n=Array.from(e.deco.keys()).map(i=>({old:i,updated:i}));return t<0?r=Rn(r,n):r=Fn(r,n),n=n.filter(i=>yn(i,e.deco,t)),e.deco=n.reduce((i,o)=>{if(i.has(o.updated)){let s=i.get(o.updated)?.concat(e.deco.get(o.old));return s.forEach(l=>l.generateRange(o.updated)),i.set(o.updated,s)}return e.deco.get(o.old)?.forEach(s=>s.generateRange(o.updated)),i.set(o.updated,e.deco.get(o.old))},new Map),r}function vt(r,e){let t=pe(r,e,new Map);function n(i,o){return i.filter(a=>o.findIndex(l=>{let u=a.currentRange.isEqual(l.currentRange);if(a.rgb===null&&l.rgb!==null)return!1;let g=ft(a.rgb,l.rgb);return u&&g})===-1)}return c.editor?.visibleRanges.forEach(i=>{let o=i.start.line;for(o;o<=i.end.line+1;o++)c.deco.has(o)===!0&&t.has(o)===!0&&t.set(o,n(t.get(o),c.deco.get(o))),c.deco.has(o)&&!t.has(o)&&c.deco.get(o)?.forEach(ce)}),Dt(t),t}function Ct(){let r=c.editor?.document.getText()??"",e=L.textToFileLines(r),t=[];return c.editor?.visibleRanges.forEach(n=>{let i=n.start.line;for(i;i<=n.end.line+1;i++)e[i]&&e[i].line!==null&&t.push(e[i])}),t}function*Sn(){let r=c.editor?.document.getText()??"",e=L.textToFileLines(r),t=Ct();yield v.findVariablesDeclarations(c.editor?.document.fileName,e);let n=yield v.findVariables(c.editor?.document.fileName,t),i=yield L.findColors(t),o=vt(i,n);W.decorate(c.editor,o,c.currentSelection??[]),ue(o,c),ge(c)}function*Ln(){yield new Promise(a=>setTimeout(a,50));let r=c.editor?.document.fileName,e=L.textToFileLines(c.editor?.document.getText()??""),t=Ct();v.removeVariablesDeclarations(c.editor?.document.fileName),Dt(c.deco),yield v.findVariablesDeclarations(r,e);let n=yield v.findVariables(r,t),i=yield L.findColors(t),o=vt(i,n);W.decorate(c.editor,o,c.currentSelection??[]),ue(o,c),ge(c)}function Dt(r){let e=r.entries(),t=e.next();for(;!t.done;){let n=t.value[0],i=t.value[1];r.set(n,i.filter(o=>!o.disposed)),t=e.next()}}function In(r){if(r.contentChanges.length!==0&&c.editor&&r.document.fileName===c.editor.document.fileName){c.editor=re.window.activeTextEditor;let e=r.contentChanges.map(n=>n),t=c.editor.document.lineCount-(c.nbLine??0);t!==0&&(e=Tn(e,c,t),c.nbLine=c.editor.document.lineCount),An(e,c),xt.run(Ln)}}function Vn(r){re.workspace.onDidChangeTextDocument(In,null,r.subscriptions),re.window.onDidChangeTextEditorVisibleRanges(()=>xt.run(Sn),null,r.subscriptions)}var yt={setupEventListeners:Vn};var Ut=He(Ot(),1);var ie=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>65536)throw new TypeError("pattern is too long")};var kn={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},oe=r=>r.replace(/[[\]\\-]/g,"\\$&"),zn=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Pt=r=>r.join(""),Bt=(r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=t+1,a=!1,s=!1,l=!1,u=!1,g=t,m="";e:for(;o<r.length;){let d=r.charAt(o);if((d==="!"||d==="^")&&o===t+1){u=!0,o++;continue}if(d==="]"&&a&&!l){g=o+1;break}if(a=!0,d==="\\"&&!l){l=!0,o++;continue}if(d==="["&&!l){for(let[T,[N,j,O]]of Object.entries(kn))if(r.startsWith(T,o)){if(m)return["$.",!1,r.length-t,!0];o+=T.length,O?i.push(N):n.push(N),s=s||j;continue e}}if(l=!1,m){d>m?n.push(oe(m)+"-"+oe(d)):d===m&&n.push(oe(d)),m="",o++;continue}if(r.startsWith("-]",o+1)){n.push(oe(d+"-")),o+=2;continue}if(r.startsWith("-",o+1)){m=d,o+=2;continue}n.push(oe(d)),o++}if(g<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,r.length-t,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let d=n[0].length===2?n[0].slice(-1):n[0];return[zn(d),!1,g-t,!1]}let p="["+(u?"^":"")+Pt(n)+"]",h="["+(u?"":"^")+Pt(i)+"]";return[n.length&&i.length?"("+p+"|"+h+")":n.length?p:h,s,g-t,!0]};var z=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var Gn=new Set(["!","?","+","*","@"]),Mt=r=>Gn.has(r),Xn="(?!(?:^|/)\\.\\.?(?:$|/))",he="(?!\\.)",Un=new Set(["[","."]),Wn=new Set(["..","."]),jn=new Set("().*{}+?[]^$\\!"),Hn=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ze="[^/]",kt=ze+"*?",zt=ze+"+?",Z=class r{type;#r;#n;#o=!1;#e=[];#t;#a;#l;#s=!1;#i;#c;#g=!1;constructor(e,t,n={}){this.type=e,e&&(this.#n=!0),this.#t=t,this.#r=this.#t?this.#t.#r:this,this.#i=this.#r===this?n:this.#r.#i,this.#l=this.#r===this?[]:this.#r.#l,e==="!"&&!this.#r.#s&&this.#l.push(this),this.#a=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(let e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#e.map(e=>String(e)).join("|")+")":this.#c=this.#e.map(e=>String(e)).join("")}#h(){if(this!==this.#r)throw new Error("should only call on root");if(this.#s)return this;this.toString(),this.#s=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let t=e,n=t.#t;for(;n;){for(let i=t.#a+1;!n.type&&i<n.#e.length;i++)for(let o of e.#e){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#e[i])}t=n,n=t.#t}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#t===this))throw new Error("invalid part: "+t);this.#e.push(t)}}toJSON(){let e=this.type===null?this.#e.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#e.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#r||this.#r.#s&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#r===this)return!0;if(!this.#t?.isStart())return!1;if(this.#a===0)return!0;let e=this.#t;for(let t=0;t<this.#a;t++){let n=e.#e[t];if(!(n instanceof r&&n.type==="!"))return!1}return!0}isEnd(){if(this.#r===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();let e=this.#t?this.#t.#e.length:0;return this.#a===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let n of this.#e)t.copyIn(n);return t}static#u(e,t,n,i){let o=!1,a=!1,s=-1,l=!1;if(t.type===null){let h=n,b="";for(;h<e.length;){let d=e.charAt(h++);if(o||d==="\\"){o=!o,b+=d;continue}if(a){h===s+1?(d==="^"||d==="!")&&(l=!0):d==="]"&&!(h===s+2&&l)&&(a=!1),b+=d;continue}else if(d==="["){a=!0,s=h,l=!1,b+=d;continue}if(!i.noext&&Mt(d)&&e.charAt(h)==="("){t.push(b),b="";let T=new r(d,t);h=r.#u(e,T,h,i),t.push(T);continue}b+=d}return t.push(b),h}let u=n+1,g=new r(null,t),m=[],p="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,p+=h;continue}if(a){u===s+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===s+2&&l)&&(a=!1),p+=h;continue}else if(h==="["){a=!0,s=u,l=!1,p+=h;continue}if(Mt(h)&&e.charAt(u)==="("){g.push(p),p="";let b=new r(h,g);g.push(b),u=r.#u(e,b,u,i);continue}if(h==="|"){g.push(p),p="",m.push(g),g=new r(null,t);continue}if(h===")")return p===""&&t.#e.length===0&&(t.#g=!0),g.push(p),p="",t.push(...m,g),u;p+=h}return t.type=null,t.#n=void 0,t.#e=[e.substring(n-1)],u}static fromGlob(e,t={}){let n=new r(null,void 0,t);return r.#u(e,n,0,t),n}toMMPattern(){if(this!==this.#r)return this.#r.toMMPattern();let e=this.toString(),[t,n,i,o]=this.toRegExpSource();if(!(i||this.#n||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let s=(this.#i.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,s),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){let t=e??!!this.#i.dot;if(this.#r===this&&this.#h(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#e.map(h=>{let[b,d,T,N]=typeof h=="string"?r.#m(h,this.#n,l):h.toRegExpSource(e);return this.#n=this.#n||T,this.#o=this.#o||N,b}).join(""),g="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&Wn.has(this.#e[0]))){let b=Un,d=t&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),T=!t&&!e&&b.has(u.charAt(0));g=d?Xn:T?he:""}let m="";return this.isEnd()&&this.#r.#s&&this.#t?.type==="!"&&(m="(?:$|\\/)"),[g+u+m,z(u),this.#n=!!this.#n,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#p(t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#e=[l],this.type=null,this.#n=void 0,[l,z(this.toString()),!1,!1]}let a=!n||e||t||!he?"":this.#p(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let s="";if(this.type==="!"&&this.#g)s=(this.isStart()&&!t?he:"")+zt;else{let l=this.type==="!"?"))"+(this.isStart()&&!t&&!e?he:"")+kt+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;s=i+o+l}return[s,z(o),this.#n=!!this.#n,this.#o]}#p(e){return this.#e.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=t.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#m(e,t,n=!1){let i=!1,o="",a=!1;for(let s=0;s<e.length;s++){let l=e.charAt(s);if(i){i=!1,o+=(jn.has(l)?"\\":"")+l;continue}if(l==="\\"){s===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,g,m,p]=Bt(e,s);if(m){o+=u,a=a||g,s+=m-1,t=t||p;continue}}if(l==="*"){n&&e==="*"?o+=zt:o+=kt,t=!0;continue}if(l==="?"){o+=ze,t=!0;continue}o+=Hn(l)}return[o,z(e),!!t,a]}};var Ge=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&");var C=(r,e,t={})=>(ie(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Q(e,t).match(r)),qn=/^\*+([^+@!?\*\[\(]*)$/,Jn=r=>e=>!e.startsWith(".")&&e.endsWith(r),Zn=r=>e=>e.endsWith(r),Qn=r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),Yn=r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),Kn=/^\*+\.\*+$/,ei=r=>!r.startsWith(".")&&r.includes("."),ti=r=>r!=="."&&r!==".."&&r.includes("."),ri=/^\.\*+$/,ni=r=>r!=="."&&r!==".."&&r.startsWith("."),ii=/^\*+$/,oi=r=>r.length!==0&&!r.startsWith("."),ai=r=>r.length!==0&&r!=="."&&r!=="..",si=/^\?+([^+@!?\*\[\(]*)?$/,li=([r,e=""])=>{let t=Wt([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},ci=([r,e=""])=>{let t=jt([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},ui=([r,e=""])=>{let t=jt([r]);return e?n=>t(n)&&n.endsWith(e):t},gi=([r,e=""])=>{let t=Wt([r]);return e?n=>t(n)&&n.endsWith(e):t},Wt=([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},jt=([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},Ht=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Gt={win32:{sep:"\\"},posix:{sep:"/"}},pi=Ht==="win32"?Gt.win32.sep:Gt.posix.sep;C.sep=pi;var V=Symbol("globstar **");C.GLOBSTAR=V;var hi="[^/]",mi=hi+"*?",di="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",fi="(?:(?!(?:\\/|^)\\.).)*?",bi=(r,e={})=>t=>C(t,r,e);C.filter=bi;var I=(r,e={})=>Object.assign({},r,e),Ei=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return C;let e=C;return Object.assign((n,i,o={})=>e(n,i,I(r,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,I(r,o))}static defaults(i){return e.defaults(I(r,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,I(r,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,I(r,o))}},unescape:(n,i={})=>e.unescape(n,I(r,i)),escape:(n,i={})=>e.escape(n,I(r,i)),filter:(n,i={})=>e.filter(n,I(r,i)),defaults:n=>e.defaults(I(r,n)),makeRe:(n,i={})=>e.makeRe(n,I(r,i)),braceExpand:(n,i={})=>e.braceExpand(n,I(r,i)),match:(n,i,o={})=>e.match(n,i,I(r,o)),sep:e.sep,GLOBSTAR:V})};C.defaults=Ei;var qt=(r,e={})=>(ie(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,Ut.default)(r));C.braceExpand=qt;var xi=(r,e={})=>new Q(r,e).makeRe();C.makeRe=xi;var vi=(r,e,t={})=>{let n=new Q(e,t);return r=r.filter(i=>n.match(i)),n.options.nonull&&!r.length&&r.push(e),r};C.match=vi;var Xt=/[?*]|[+@!]\(.*?\)|\[|\]/,Ci=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Q=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){ie(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Ht,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,s)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!Xt.test(o[2]))&&!Xt.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(g=>this.parse(g))];if(u)return[o[0],...o.slice(1).map(g=>this.parse(g))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let n=-1;for(;(n=t.indexOf("**",n+1))!==-1;){let i=n;for(;t[i+1]==="**";)i++;i!==n&&t.splice(n,i-n)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let s=n[i+1],l=n[i+2],u=n[i+3];if(s!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;t=!0,n.splice(i,1);let g=n.slice(0);g[i]="**",e.push(g),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let s=n[a];a===1&&s===""&&n[0]===""||(s==="."||s==="")&&(t=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(t=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){t=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){let i=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(i){e[t]=[],e[n]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,n=!1){let i=0,o=0,a=[],s="";for(;i<e.length&&o<t.length;)if(e[i]===t[o])a.push(s==="b"?t[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&t[o]===e[i+1])a.push(e[i]),i++;else if(n&&t[o]==="**"&&e[i]===t[o+1])a.push(t[o]),o++;else if(e[i]==="*"&&t[o]&&(this.options.dot||!t[o].startsWith("."))&&t[o]!=="**"){if(s==="b")return!1;s="a",a.push(e[i]),i++,o++}else if(t[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(s==="a")return!1;s="b",a.push(t[o]),i++,o++}else return!1;return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n=!1){let i=this.options;if(this.isWindows){let d=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),T=!d&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),N=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),j=!N&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),O=T?3:d?0:void 0,B=j?3:N?0:void 0;if(typeof O=="number"&&typeof B=="number"){let[M,S]=[e[O],t[B]];M.toLowerCase()===S.toLowerCase()&&(t[B]=M,B>O?t=t.slice(B):O>B&&(e=e.slice(O)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,s=0,l=e.length,u=t.length;a<l&&s<u;a++,s++){this.debug("matchOne loop");var g=t[s],m=e[a];if(this.debug(t,g,m),g===!1)return!1;if(g===V){this.debug("GLOBSTAR",[t,g,m]);var p=a,h=s+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;p<l;){var b=e[p];if(this.debug(`
globstar while`,e,p,t,h,b),this.matchOne(e.slice(p),t.slice(h),n))return this.debug("globstar found match!",p,l,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,t,h),p===l))}let d;if(typeof g=="string"?(d=m===g,this.debug("string match",g,m,d)):(d=g.test(m),this.debug("pattern match",g,m,d)),!d)return!1}if(a===l&&s===u)return!0;if(a===l)return n;if(s===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return qt(this.pattern,this.options)}parse(e){ie(e);let t=this.options;if(e==="**")return V;if(e==="")return"";let n,i=null;(n=e.match(ii))?i=t.dot?ai:oi:(n=e.match(qn))?i=(t.nocase?t.dot?Yn:Qn:t.dot?Zn:Jn)(n[1]):(n=e.match(si))?i=(t.nocase?t.dot?ci:li:t.dot?ui:gi)(n):(n=e.match(Kn))?i=t.dot?ti:ei:(n=e.match(ri))&&(i=ni);let o=Z.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?mi:t.dot?di:fi,i=new Set(t.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(g=>{if(g instanceof RegExp)for(let m of g.flags.split(""))i.add(m);return typeof g=="string"?Ci(g):g===V?V:g._src});return u.forEach((g,m)=>{let p=u[m+1],h=u[m-1];g!==V||h===V||(h===void 0?p!==void 0&&p!==V?u[m+1]="(?:\\/|"+n+"\\/)?"+p:u[m]=n:p===void 0?u[m-1]=h+"(?:\\/|"+n+")?":p!==V&&(u[m-1]=h+"(?:\\/|\\/"+n+"\\/)"+p,u[m+1]=V))}),u.filter(g=>g!==V).join("/")}).join("|"),[a,s]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+s+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let s=i.length-2;!a&&s>=0;s--)a=i[s];for(let s=0;s<o.length;s++){let l=o[s],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return C.defaults(e).Minimatch}};C.AST=Z;C.Minimatch=Q;C.escape=Ge;C.unescape=z;var w={languages:[],isHideCurrentLineDecorations:!0,colorizedVariables:[],colorizedColors:[],filesToExcludes:[],filesToIncludes:[],inferedFilesToInclude:[],searchVariables:!1,decorationFn:Pe()},me=class{editor=void 0;nbLine=0;deco=new Map;currentSelection=null;statusBar;constructor(){this.statusBar=F.window.createStatusBarItem(F.StatusBarAlignment.Right)}updateStatusBar(e){let t=e?"$(check)":"$(circle-slash)",n=e?"Colorize is activated for this file":"Colorize is not activated for this file";this.statusBar.text=`${t} Colorize`,this.statusBar.backgroundColor=new F.ThemeColor("statusBar.background"),this.statusBar.color=new F.ThemeColor("statusBar.foreground"),this.statusBar.tooltip=n,this.statusBar.show()}},G=new ut;async function Di(r){if(!r.editor)return;let e=r.editor.document.getText(),t=L.textToFileLines(e),n=r.editor.visibleRanges.reduce((a,s)=>[...a,...t.slice(s.start.line,s.end.line+2)],[]);await v.findVariablesDeclarations(r.editor.document.fileName,t);let i=await v.findVariables(r.editor.document.fileName,n),o=await L.findColors(n);return pe(o,i,r.deco),W.decorate(r.editor,r.deco,r.currentSelection??[])}function ue(r,e){let t=r.entries(),n=t.next();for(;!n.done;){let i=n.value[0];e.deco.has(i)?e.deco.set(i,e.deco.get(i).concat(r.get(i))):e.deco.set(i,r.get(i)??[]),n=t.next()}}function ge(r){let e=r.deco.entries(),t=new Map,n=e.next();for(;!n.done;){let i=n.value[0],o=n.value[1],a=[];o.forEach(s=>{s.generateRange(i);let l=a.findIndex(u=>s.currentRange.isEqual(u.currentRange));l!==-1&&(a[l].dispose(),a=a.filter((u,g)=>g!==l)),a.push(s)}),t.set(i,a),n=e.next()}r.deco=t}function Jt(r,e,t){r.has(e)?r.set(e,r.get(e).concat([t])):r.set(e,[t])}function pe(r,e,t){return r.map(({line:n,colors:i})=>i.forEach(o=>{let a=L.generateDecoration(o,n,w.decorationFn);Jt(t,n,a)})),e.map(({line:n,colors:i})=>i.forEach(o=>{let a=v.generateDecoration(o,n,w.decorationFn);Jt(t,n,a)})),t}function yi(r){return w.languages.indexOf(r)!==-1}function Ai(r){return w.filesToIncludes.some(e=>C(r,e,{nonegate:!0}))}function wi(r){return w.filesToExcludes.some(e=>C(r,e,{nonegate:!0}))}function Qt(r){return!wi(r.fileName)&&(yi(r.languageId)||Ai(r.fileName))}function Ri(r,e){return!w.isHideCurrentLineDecorations||r.textEditor!==c.editor||(c.currentSelection&&c.currentSelection.forEach(t=>{let n=c.deco.get(t);n!==void 0&&W.decorateOneLine(c.editor,n,t)}),c.currentSelection=[],r.selections.forEach(t=>{let n=c.deco.get(t.active.line);n&&n.forEach(i=>i.hide())}),c.currentSelection=r.selections.map(t=>t.active.line)),e()}function Zt(r){G.push(e=>(c.editor&&c.editor.document.fileName===r.fileName&&U.saveDecorations(r,c.deco),e()))}async function de(r,e){if(c.editor=void 0,c.deco=new Map,!r||!Qt(r.document))return c.updateStatusBar(!1),e();c.updateStatusBar(!0),c.editor=r,c.currentSelection=r.selections.map(n=>n.active.line);let t=U.getCachedDecorations(r.document);if(t)c.deco=t,c.nbLine=r.document.lineCount,W.decorate(c.editor,c.deco,c.currentSelection);else{c.nbLine=r.document.lineCount;try{await Di(c)}finally{U.saveDecorations(c.editor.document,c.deco)}}return e()}function Fi(r){r&&(c.editor!==void 0&&c.editor!==null&&(c.deco.forEach(e=>e.forEach(t=>t.hide())),U.saveDecorations(c.editor.document,c.deco)),Yt().filter(e=>e!==r).forEach(e=>{G.push(t=>de(e,t))}),G.push(e=>de(r,e)))}function Ti(r,e){let t=r.deco.entries(),n=t.next();for(;!n.done;){let i=n.value[0],o=n.value[1];r.deco.set(i,o.filter(a=>!a.disposed)),n=t.next()}return e()}function Si(){c.deco.clear(),c.deco=new Map,U.clearCache()}function Li(){let r=Oe();Si(),L.setupColorsExtractors(r.colorizedColors),G.push(async e=>(v.setupVariablesExtractors(r.colorizedVariables),r.searchVariables&&await v.getWorkspaceVariables(r.filesToIncludes.concat(r.inferedFilesToInclude),r.filesToExcludes),e())),w=r,Kt()}function Ii(r){F.window.onDidChangeTextEditorSelection(e=>G.push(t=>Ri(e,t)),null,r.subscriptions),F.workspace.onDidCloseTextDocument(Zt,null,r.subscriptions),F.workspace.onDidSaveTextDocument(Zt,null,r.subscriptions),F.window.onDidChangeActiveTextEditor(Fi,null,r.subscriptions),F.workspace.onDidChangeConfiguration(Li,null,r.subscriptions),yt.setupEventListeners(r)}function Yt(){return F.window.visibleTextEditors.filter(r=>r.document.uri.scheme==="file")}function Kt(){c.nbLine=65,Yt().forEach(r=>{G.push(e=>de(r,e))})}var c;function Vi(r){return c=new me,w=Oe(),L.setupColorsExtractors(w.colorizedColors),v.setupVariablesExtractors(w.colorizedVariables),G.push(async e=>{try{w.searchVariables&&await v.getWorkspaceVariables(w.filesToIncludes.concat(w.inferedFilesToInclude),w.filesToExcludes),Ii(r)}catch(t){console.log(t)}return e()}),Kt(),c}function _i(){c.nbLine=null,c.editor=void 0,c.deco.clear(),U.clearCache()}0&&(module.exports={ColorizeContext,activate,canColorize,cleanDecorationList,colorize,config,deactivate,extension,generateDecorations,q,removeDuplicateDecorations,updateContextDecorations});
